# telegram-gifts-parser
# Telegram Gifts Data Collector

Этот проект собирает данные о **floor-ценах** и **истории продаж** telegram-подарков в реальном времени. Он помогает анализировать рынок telegram-подарков, предоставляя удобные инструменты для сбора и анализа данных.

---

## Функциональность

- **Сбор данных**
  - Импорт истории чатов из Telegram в формате JSON.
  - Автоматическая загрузка и обновление данных о floor-ценах и продажах.

- **Хранение данных**
  - Данные сохраняются в базе данных SQLite (`gifts.db`), которая содержит:
    - Статичные данные о подарках.
    - Историю изменений floor-цен.
    - Историю продаж.

- **Анализ данных**
  - Скрипт `analyzer_v2.py` реализует Telegram-бота для анализа подарков с подробной статистикой и прогнозами.
  - Возможность построения графиков и детального анализа динамики изменения цен.

- **Сбор данных в реальном времени**
  - Скрипт `snifer.py` использует Telegram-аккаунт для мониторинга новых сообщений и автоматического добавления их в базу данных.

---

## Основные Скрипты

- **main.py**  
  Собирает два JSON-файла (история уведомлений о подарках и изменения floor-цен) и импортирует данные в базу данных.  
  ⚠️ Возможна ошибка с форматом даты — в этом случае потребуется вручную подкорректировать формат дат в файлах.

- **analyzer_v2.py**  
  Telegram-бот для анализа подарков, который использует собственную базу данных пользователей. Бот предоставляет команды для получения информации о подарках, прогнозирования цены и детального анализа.

- **snifer.py**  
  Скрипт для сбора данных в реальном времени. Требует наличия Telegram-аккаунта для подключения и мониторинга новых сообщений.

---

## Инструкция по Запуску

1. **Загрузка Истории Чатов**  
   Скачайте историю чатов из следующих каналов в формате JSON:
   - Уведомления о подарках.
   - Изменения floor-цен.

2. **Импорт Данных в Базу**  
   Запустите `main.py` для импорта данных из JSON-файлов в базу данных `gifts.db`.  
   > **Примечание:** Если возникнет ошибка с форматом даты, отредактируйте файлы JSON, приведя формат дат к ожидаемому виду.

3. **Запуск Анализатора**  
   Запустите `analyzer_v2.py` для старта Telegram-бота, который позволит выполнять запросы по анализу подарков.

4. **Сбор Данных в Реальном Времени**  
   Запустите `snifer.py` для подключения к Telegram и сбора новых сообщений о подарках в реальном времени.

---

## Зависимости

Все основные модули (например, `sqlite3`, `json`, `datetime`, `re`) входят в стандартную библиотеку Python.  
Для работы Telegram-бота и клиента в реальном времени необходимо установить следующие пакеты:

```bash
pip install python-telegram-bot telethon

![image](https://github.com/user-attachments/assets/0434a5c5-c5af-4272-afe6-85fb6e37e2e0)

![image](https://github.com/user-attachments/assets/d979a1b7-814f-447d-80b4-162a6c2e5a5b)

![image](https://github.com/user-attachments/assets/b6134b50-726f-453a-9897-995951e13842)
